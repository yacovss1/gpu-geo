Design Summary: GPU Filtering Architecture
Hidden Buffer Encoding (4 channels):

R+G: Feature ID (16-bit, 1-65534)
B: Layer ID (hashed string, 0-255)
A: Geometry flags (0.0=pickable for markers, 0.5=skip)
Two-Level GPU Filtering:

Layer-level filtering (B channel):

Uniform buffer with whitelisted layer IDs passed to GPU
Compute shader checks if layer is in whitelist
Use case: "Only process building/water/landuse layers"
Geometry-level filtering (A channel):

Alpha encodes geometry type within feature
Compute shader checks alpha < 0.25 for pickable geometry
Use case: "Use roof pixels, skip walls/footprints"
Compute Shader Logic:

if (isLayerPickable(layerId) && pixel.a < 0.25 && fid > 0) {
    // Accumulate for marker centroid
}

Result:

Building markers appear on roofs at correct elevation
Wall and footprint pixels excluded from calculation
Configurable per-layer picking without shader recompilation
